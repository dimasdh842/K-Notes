(this["webpackJsonpk-notes-app"]=this["webpackJsonpk-notes-app"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(26),o=n.n(s),i=(n(43),n(44),n(17)),c=n(20),r=n(21),l=n(23),u=n(22),d=n(28);n(60),n(61),n(45);n(48);d.a.initializeApp({apiKey:"AIzaSyBGl7KNYKd1D2DRU5wlEa5-PIBZNjGL-fI",authDomain:"doing-nothing-firebase.firebaseapp.com",projectId:"doing-nothing-firebase",storageBucket:"doing-nothing-firebase.appspot.com",messagingSenderId:"54813910745",appId:"1:54813910745:web:20e5d922ad75133ba240c8",measurementId:"G-LRPZ39MSNL"}),d.a.analytics();var h=d.a,p=n(18),j=(n(53),n(3)),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={title:"",content:"",isActive:!1,user:{},notes:[],editStatus:!1},e.handleSubmitedNote=function(){var t={title:e.state.title,content:e.state.content,date:(new Date).getTime(),userId:e.state.user.uid};e.props.addDataToAPI(t),e.setState({title:"",content:""}),console.log(e.state)},e.handleChangeText=function(t){e.setState(Object(i.a)({},t.target.id,t.target.value))},e.handleUpdateChange=function(e){},e.handleInputForm=function(){e.state.isActive?e.setState({isActive:!1}):e.setState({isActive:!0}),console.log(e.state)},e.handleUpdateNote=function(t){""===e.state.title&&(e.state.title=t.data.title),""===e.state.content&&(e.state.content=t.data.content);var n={userId:e.state.user.uid,noteId:t.id,body:{date:(new Date).getTime(),content:e.state.content,title:e.state.title}};console.log(n),e.props.updateDataAPI(n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},e.handleDeleteNote=function(t){var n={noteId:t.id,userId:e.state.user.uid};e.props.deleteDataAPI(n)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.state.user=t,console.log("localstorage",t),console.log(this.state.user),this.props.getDataAPI(this.state.user.uid).then((function(t){e.setState({notes:t}),console.log(e.props.notes),e.setState({title:"",content:""})}))}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"dashboard-container",children:[Object(j.jsxs)("div",{className:"dashboard-header",children:[Object(j.jsxs)("h2",{children:["hello ",this.state.user.email]}),Object(j.jsx)("p",{children:"Type something matter today and let me to keep it for you"}),Object(j.jsxs)("div",{className:"header-notes",children:[Object(j.jsx)("input",{className:"search",type:"text",placeholder:"search your notes"}),Object(j.jsx)("button",{className:"new-note-btn",onClick:this.handleInputForm,children:Object(j.jsx)("i",{className:"fas fa-pencil-alt"})})]})]}),Object(j.jsx)("div",{className:"all-notes",children:this.state.isActive?Object(j.jsxs)("div",{className:"add-new-note-form",children:[Object(j.jsx)("input",{id:"title",className:"title-note",placeholder:"title",type:"text",value:this.state.title,onChange:this.handleChangeText}),Object(j.jsx)("textarea",{id:"content",value:this.state.content,className:"content-note",placeholder:"content",onChange:this.handleChangeText}),Object(j.jsx)("span",{className:"date-note",children:new Date((new Date).getTime()).toLocaleTimeString()}),Object(j.jsx)("button",{className:"submit-note",onClick:this.handleSubmitedNote,children:Object(j.jsx)("i",{className:"fas fa-save"})})]}):null}),Object(j.jsx)("div",{className:"all-notes",children:Object(j.jsx)(a.Fragment,{children:this.props.notes.length>0?this.props.notes.map((function(t){return Object(j.jsxs)("div",{className:"add-new-note-form",onClick:e.handleUpdatebar,children:[Object(j.jsx)("input",{id:"title",className:"title-note",placeholder:"title",type:"text",defaultValue:t.data.title,onChange:e.handleChangeText}),Object(j.jsx)("textarea",{id:"content",defaultValue:t.data.content,className:"content-note",placeholder:"content",onChange:e.handleChangeText}),Object(j.jsxs)("div",{className:"submit-note-bar",children:[Object(j.jsx)("span",{className:"date-note",children:new Date(t.data.date).toLocaleTimeString()}),Object(j.jsxs)("div",{children:[Object(j.jsx)("i",{className:"fas fa-trash",onClick:function(){return e.handleDeleteNote(t)}}),Object(j.jsx)("i",{className:"fas fa-save",onClick:function(){return e.handleUpdateNote(t)}})]})]})]},t.id)})):"Tidak ada catatan"})})]})}}]),n}(a.Component),m=Object(p.b)((function(e){return{user:e.user,notes:e.notes}}),(function(e){return{addDataToAPI:function(t){return e(function(e){return function(t){h.database().ref("notes/"+e.userId).push({title:e.title,content:e.content,date:e.date})}}(t))},getDataAPI:function(t){return e(function(e){return function(t){var n=h.database().ref("notes/"+e);return new Promise((function(e){n.on("value",(function(n){var a;a=Object.keys(n.val()).map((function(e){return{id:e,data:n.val()[e]}})),t({type:"SET_NOTES",value:a}),e(a)}))}))}}(t))},updateDataAPI:function(t){return e(function(e){return function(t){console.log(e);var n=h.database().ref("notes/".concat(e.userId,"/").concat(e.noteId));return new Promise((function(t,a){n.set(e.body,(function(e){e?a(!1):t(!0)}))}))}}(t))},deleteDataAPI:function(t){return e(function(e){return function(t){var n=h.database().ref("notes/".concat(e.userId,"/").concat(e.noteId));return new Promise((function(e,t){n.remove()}))}}(t))}}}))(b),f=(n(55),function(e){return e.disabled?Object(j.jsx)("button",{className:"btn-disabled",disabled:!0,children:"Loading..."}):Object(j.jsx)("button",{className:"btn-submit",onClick:e.onClick,children:e.title})}),g=(n(56),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",name:""},e.handleChangeText=function(t){e.setState(Object(i.a)({},t.target.id,t.target.value))},e.handleLoginSubmit=function(t){t.preventDefault();var n=e.state,a=n.email,s=n.password;e.props.loginAPI(a,s).then((function(t){localStorage.setItem("user",JSON.stringify(t)),e.handleClearForm(),e.props.history.push("/")})).catch((function(e){console.log("login failed",e)}))},e.handleClearForm=function(){e.setState({email:"",password:""})},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"login-container",children:[Object(j.jsx)("h2",{children:"Login Form"}),Object(j.jsx)("p",{children:"Welcome to Your online notebook it's  very usefull right? don't you think so?"}),Object(j.jsxs)("div",{className:"login-form",children:[Object(j.jsx)("input",{type:"text",id:"email",placeholder:"Email",className:"email",value:this.state.email,onChange:this.handleChangeText})," ",Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"password",id:"password",placeholder:"Password",className:"password",value:this.state.password,onChange:this.handleChangeText}),Object(j.jsx)("br",{}),Object(j.jsx)(f,{onClick:this.handleLoginSubmit,disabled:this.props.isLoading,title:"Login"})]})]})}}]),n}(a.Component)),O=Object(p.b)((function(e){return{isLoading:e.isLoading}}),(function(e){return{setIsloading:function(t){return e({type:"CHANGE_ISLOADING",value:t})},loginAPI:function(t,n){return e(function(e,t){return function(n){return new Promise((function(a,s){n({type:"CHANGE_ISLOADING",value:!0}),h.auth().signInWithEmailAndPassword(e,t).then((function(e){console.log(e.user),n({type:"CHANGE_ISLOADING",value:!1}),a(e.user)})).catch((function(e){var t=e.code,a=e.message;console.log(t),console.log(a),n({type:"CHANGE_ISLOADING",value:!1}),s(e)}))}))}}(t,n))},setUser:function(t){return e({type:"CHANGE_USER",value:t})}}}))(g),v=(n(57),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={email:"",name:"",password:""},e.handleChangeText=function(t){e.setState(Object(i.a)({},t.target.id,t.target.value))},e.handleRegisterSubmit=function(){var t=e.state,n=t.email,a=t.password;e.props.registerAPI(n,a).then((function(t){localStorage.setItem("user",JSON.stringify(t)),e.props.history.push("/")})).catch((function(e){console.log(e)})),e.handleClearForm()},e.handleClearForm=function(){e.setState({email:"",password:"",name:""})},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"register-container",children:[Object(j.jsx)("h2",{children:"Register Form"}),Object(j.jsx)("p",{children:"Register a new Account and enjoy the easiest way to keep your notes in the cloud"}),Object(j.jsxs)("div",{className:"register-form",children:[Object(j.jsx)("input",{type:"text",id:"name",placeholder:"name",className:"name",onChange:this.handleChangeText,value:this.props.name})," ",Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",id:"email",placeholder:"email",className:"email",onChange:this.handleChangeText,value:this.props.email})," ",Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"password",id:"password",placeholder:"password",className:"password",onChange:this.handleChangeText,value:this.props.password}),Object(j.jsx)("br",{}),Object(j.jsx)(f,{disabled:this.props.isLoading,onClick:this.handleRegisterSubmit,title:"Register"})]})]})}}]),n}(a.Component)),x=Object(p.b)((function(e){return{isLoading:e.isLoading,email:e.email,password:e.password,name:e.name}}),(function(e){return{setIsloading:function(t){return e({type:"CHANGE_ISLOADING",value:t})},registerAPI:function(t,n){return e(function(e,t){return function(n){return new Promise((function(a,s){n({type:"CHANGE_ISLOADING",value:!0}),h.auth().createUserWithEmailAndPassword(e,t).then((function(e){n({type:"CHANGE_ISLOADING",value:!1}),a(e.user)})).catch((function(e){n({type:"CHANGE_ISLOADING",value:!1}),s(e)}))}))}}(t,n))},setUser:function(t){return e({type:"CAHNGE_USER",value:t})}}}))(v),N=n(38),I=n(7),y=n(34),C=n(16),A={popup:!1,isLogin:!1,isLoading:!1,user:{},notes:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_POPUP"===t.type?Object(C.a)(Object(C.a)({},e),{},{popup:t.value}):"CHANGE_ISLOGIN"===t.type?Object(C.a)(Object(C.a)({},e),{},{isLogin:t.value}):"CHANGE_USER"===t.type?Object(C.a)(Object(C.a)({},e),{},{user:t.value}):"CHANGE_ISLOADING"===t.type?Object(C.a)(Object(C.a)({},e),{},{isLoading:t.value}):"SET_NOTES"===t.type?Object(C.a)(Object(C.a)({},e),{},{notes:t.value}):e},w=n(37),L=Object(y.b)(S,Object(y.a)(w.a));var D=function(){return Object(j.jsxs)(p.a,{store:L,children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.5.0/css/all.css",integrity:"sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU",crossOrigin:"anonymous"}),Object(j.jsxs)(N.a,{children:[Object(j.jsx)(I.a,{path:"/",exact:!0,component:m}),Object(j.jsx)(I.a,{path:"/login",component:O}),Object(j.jsx)(I.a,{path:"/register",component:x})]})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),o(e),i(e)}))};o.a.render(Object(j.jsx)(D,{}),document.getElementById("root")),T()}},[[59,1,2]]]);
//# sourceMappingURL=main.33064b49.chunk.js.map